(function(e){function t(t){for(var r,a,i=t[0],l=t[1],u=t[2],c=0,m=[];c<i.length;c++)a=i[c],Object.prototype.hasOwnProperty.call(s,a)&&s[a]&&m.push(s[a][0]),s[a]=0;for(r in l)Object.prototype.hasOwnProperty.call(l,r)&&(e[r]=l[r]);d&&d(t);while(m.length)m.shift()();return o.push.apply(o,u||[]),n()}function n(){for(var e,t=0;t<o.length;t++){for(var n=o[t],r=!0,a=1;a<n.length;a++){var l=n[a];0!==s[l]&&(r=!1)}r&&(o.splice(t--,1),e=i(i.s=n[0]))}return e}var r={},s={app:0},o=[];function a(e){return i.p+"js/"+({about:"about"}[e]||e)+"."+{about:"a4d51dfc"}[e]+".js"}function i(t){if(r[t])return r[t].exports;var n=r[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,i),n.l=!0,n.exports}i.e=function(e){var t=[],n=s[e];if(0!==n)if(n)t.push(n[2]);else{var r=new Promise((function(t,r){n=s[e]=[t,r]}));t.push(n[2]=r);var o,l=document.createElement("script");l.charset="utf-8",l.timeout=120,i.nc&&l.setAttribute("nonce",i.nc),l.src=a(e);var u=new Error;o=function(t){l.onerror=l.onload=null,clearTimeout(c);var n=s[e];if(0!==n){if(n){var r=t&&("load"===t.type?"missing":t.type),o=t&&t.target&&t.target.src;u.message="Loading chunk "+e+" failed.\n("+r+": "+o+")",u.name="ChunkLoadError",u.type=r,u.request=o,n[1](u)}s[e]=void 0}};var c=setTimeout((function(){o({type:"timeout",target:l})}),12e4);l.onerror=l.onload=o,document.head.appendChild(l)}return Promise.all(t)},i.m=e,i.c=r,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(i.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)i.d(n,r,function(t){return e[t]}.bind(null,r));return n},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="/",i.oe=function(e){throw console.error(e),e};var l=window["webpackJsonp"]=window["webpackJsonp"]||[],u=l.push.bind(l);l.push=t,l=l.slice();for(var c=0;c<l.length;c++)t(l[c]);var d=u;o.push([0,"chunk-vendors"]),n()})({0:function(e,t,n){e.exports=n("56d7")},"034f":function(e,t,n){"use strict";var r=n("85ec"),s=n.n(r);s.a},"04d4":function(e,t,n){"use strict";var r=n("139f"),s=n.n(r);s.a},1:function(e,t){},10:function(e,t){},11:function(e,t){},12:function(e,t){},"128a":function(e,t,n){},13:function(e,t){},"139f":function(e,t,n){},14:function(e,t){},15:function(e,t){},2:function(e,t){},"22d4":function(e,t,n){},"22d7":function(e,t,n){"use strict";var r=n("be87"),s=n.n(r);s.a},3:function(e,t){},4:function(e,t){},4297:function(e,t,n){"use strict";var r=n("4583"),s=n.n(r);s.a},4583:function(e,t,n){},5:function(e,t){},"54bf":function(e,t,n){"use strict";var r=n("22d4"),s=n.n(r);s.a},5664:function(e,t,n){"use strict";var r=n("e70b"),s=n.n(r);s.a},"56d7":function(e,t,n){"use strict";n.r(t);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),s=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{attrs:{id:"app"}},[n("div",{attrs:{id:"nav"}},[n("router-link",{attrs:{to:"/user"}},[e._v("Utilisateurs")]),e._v("| "),n("router-link",{attrs:{to:"/group"}},[e._v("Groupes")]),e._v("| "),n("router-link",{attrs:{to:"/schedule"}},[e._v("Horraires")]),e._v("| "),n("router-link",{attrs:{to:"/door"}},[e._v("Portes")]),e._v("| "),n("router-link",{attrs:{to:"/badge"}},[e._v("Badges")]),e._v("| "),n("router-link",{attrs:{to:"/login"}},[e._v("login")])],1),n("router-view")],1)},o=[],a=(n("034f"),n("2877")),i={},l=Object(a["a"])(i,s,o,!1,null,null,null),u=l.exports,c=(n("45fc"),n("d3b7"),n("8c4f")),d=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"home"},[n("Calendar")],1)},m=[],f=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("VueCal",{attrs:{"active-view":"week",hideTitleBar:!0,hideViewSelector:!0,locale:"fr",dragToCreateEvent:!0,editableEvents:{title:!1,drag:!0,resize:!0,delete:!0,create:!0}}}),n("button",{staticClass:"validate",on:{click:function(t){return e.onSubmit()}}},[e._v("valider")])],1)},p=[],h=(n("d81d"),n("7fa7")),v=n.n(h),g=(n("6c33"),n("b55b"),n("6486"),{name:"Calendar",data:function(){return{events:[]}},methods:{onSubmit:function(){this.events=this.$children[0].mutableEvents.map((function(e){var t=e.start,n=e.end;return{start:{day:(t.getDay()+1)%7,hour:t.getHours(),minutes:t.getMinutes()},end:{day:(n.getDay()+1)%7,hour:n.getHours(),minutes:n.getMinutes()}}})),console.log(this.events)}},components:{VueCal:v.a}}),b=g,y=(n("04d4"),Object(a["a"])(b,f,p,!1,null,null,null)),_=y.exports,D={name:"Home",props:["dataRoute"],mounted:function(){},watch:{},components:{Calendar:_}},C=D,E=Object(a["a"])(C,d,m,!1,null,null,null),k=E.exports,x=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("form",[n("div",{staticClass:"body"},[n("label",[e._v(" email "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.email,expression:"userData.email"}],attrs:{type:"text",id:"email",name:"email",required:""},domProps:{value:e.userData.email},on:{input:function(t){t.target.composing||e.$set(e.userData,"email",t.target.value)}}})]),n("label",[e._v(" Prenom "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.userData.password,expression:"userData.password"}],attrs:{type:"password",id:"password",name:"password",required:""},domProps:{value:e.userData.password},on:{input:function(t){t.target.composing||e.$set(e.userData,"password",t.target.value)}}})]),n("p",{staticClass:"invalid"},[e._v(e._s(e.errorMessage))])]),n("div",{staticClass:"footer"})]),n("button",{staticClass:"validate",on:{click:e.onSubmit}},[e._v("login")])])},w=[];n("99af");function A(e){var t="http://".concat("localhost",":").concat("5050","/").concat(e);return console.log(t),t}var S=n("bc3a"),$=n.n(S),O=n("7987"),P=n.n(O),j={name:"Login",data:function(){return{errorMessage:"",userData:{email:"",password:""}}},methods:{onSubmit:function(){var e=this;this.errorMessage="",$.a.get(A("encrypt")).then((function(t){var n=t.data,r=n;return P.a.encrypt(e.userData.password,r)})).then((function(t){return $.a.post(A("login"),{email:e.userData.email,password:t})})).then((function(t){var n=t.data;localStorage.setItem("token",n.token),e.$router.push("/user")})).catch((function(t){e.errorMessage="Mauvais login ou mot de passe",console.error("auth error",t.response.data)}))}},mounted:function(){},components:{}},q=j,U=Object(a["a"])(q,x,w,!1,null,null,null),F=U.exports,T=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"groups"},[n("ElementsDisplay",{attrs:{elements:e.elements,selectedElement:e.selectedElement},on:{queryResult:e.onQueryResult,add:e.onAddElement}},[n("tr",{attrs:{slot:"headers"},slot:"headers"},[n("th",[e._v("Nom")])]),e._l(e.filteredElements,(function(t,r){return n("tr",{key:r,attrs:{slot:"body"},on:{click:function(n){return e.onElementClick(t)}},slot:"body"},[n("td",[e._v(e._s(t.name))])])})),n("Group",{attrs:{slot:"form",doors:e.doors,element:e.selectedElement},on:{cancel:function(t){return e.onCancel()},submit:function(t){return e.onSubmit()}},slot:"form"})],2)],1)},N=[],G=(n("13d5"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{attrs:{element:e.element,onSubmit:e.onSubmit,onDelete:e.onDelete,onCancel:e.onCancel}},[n("div",{staticClass:"body",attrs:{slot:"body"},slot:"body"},[n("label",[e._v(" nom "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.group.name,expression:"group.name"}],class:e.getClass("name"),attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:e.group.name},on:{input:function(t){t.target.composing||e.$set(e.group,"name",t.target.value)}}})]),n("div",{staticClass:"large-form-container"},[n("span",{staticClass:"date-container"},e._l(e.doors,(function(t,r){return n("button",{key:r,class:e.getDoorButtonClass(r),on:{click:function(t){return e.onDoorClick(r,t)}}},[e._v(e._s(t.name))])})),0)]),n("div",[n("label",[e._v(" Horraire "),n("select",{directives:[{name:"model",rawName:"v-model",value:e.currentDoorAcces,expression:"currentDoorAcces"}],class:e.getClass("currentDoorAcces"),attrs:{type:"select"},on:{change:function(t){var n=Array.prototype.filter.call(t.target.options,(function(e){return e.selected})).map((function(e){var t="_value"in e?e._value:e.value;return t}));e.currentDoorAcces=t.target.multiple?n:n[0]}}},e._l(e.schedules,(function(t,r){return n("option",{key:r,domProps:{value:t.id}},[e._v(e._s(t.name))])})),0)])])])])}),R=[],B=(n("4160"),n("caad"),n("2532"),n("159b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.element?n("form",[n("div",{staticClass:"body"},[e._t("body")],2),n("div",{staticClass:"footer"},[n("input",{staticClass:"validate",attrs:{type:"submit",value:"valider"},on:{click:e.onSubmit}}),n("button",{on:{click:e.onCancel}},[e._v("cancel")]),n("input",{staticClass:"delete",attrs:{type:"submit",value:"suprimer"},on:{click:e.onDeleteClick}})]),n("Confirm",{attrs:{message:e.getDeleteMessage(),visible:e.confirmVisible},on:{confirm:e.onValidateConfirm,cancel:e.onValidateCancel}})],1):e._e()}),H=[],M=(n("7db0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return e.visible?n("div",{staticClass:"modal"},[n("div",{staticClass:"modal-body modal-body-small"},[n("p",{staticClass:"body"},[e._v(e._s(e.message))]),n("div",{staticClass:"footer"},[n("button",{staticClass:"delete",on:{click:e.onCancel}},[e._v("annuler")]),n("button",{staticClass:"validate",on:{click:e.onConfirm}},[e._v("Ok")])])])]):e._e()}),V=[],Q={name:"Confirm",props:["visible","message"],methods:{onCancel:function(e){e.stopPropagation(),e.preventDefault(),this.$emit("cancel")},onConfirm:function(e){e.stopPropagation(),e.preventDefault(),this.$emit("confirm")}}},I=Q,J=(n("5664"),Object(a["a"])(I,M,V,!1,null,null,null)),L=J.exports,z={name:"Form",props:["element","onSubmit","onDelete","onCancel"],data:function(){return{invalidFields:[],confirmVisible:!1}},methods:{getDeleteMessage:function(){return"Etes vous sur ? "},onDeleteClick:function(){event.stopPropagation(),event.preventDefault(),this.confirmVisible=!0},onValidateConfirm:function(){this.confirmVisible=!1,this.onDelete()},onValidateCancel:function(){this.confirmVisible=!1},getClass:function(e){return this.invalidFields.find((function(t){return t===e}))?"invalid":""}},components:{Confirm:L}},K=z,W=(n("82bc"),Object(a["a"])(K,B,H,!1,null,null,null)),X=W.exports,Y={name:"Form",props:["element"],data:function(){return{invalidFields:[]}},watch:{element:function(){this.fetch()}},methods:{getClass:function(e){return this.invalidFields.find((function(t){return t===e}))?"invalid":""},onSubmit:function(){console.log("TODO")},onCancel:function(e){e.stopPropagation(),e.preventDefault(),this.$emit("cancel")},onDelete:function(){console.log("TODO")},fetch:function(){}},mounted:function(){this.fetch()},components:{}},Z={name:"Group",props:["doors"],data:function(){return{schedules:[],errorResponses:[],indexDoor:0}},mixins:[Y],computed:{currentDoorAcces:{get:function(){return this.group.doorAccess[this.doors[this.indexDoor].id]},set:function(e){this.group.doorAccess[this.doors[this.indexDoor].id]=e}},group:{get:function(){return this.element},set:function(e){this.element=e}}},watch:{errorResponses:function(e){var t=this;e&&e.forEach((function(e){e.includes("schedule")&&(t.invalidFields=t.invalidFields.concat("currentDoorAcces"))}))}},methods:{getDoorButtonClass:function(e){return e===this.indexDoor?"validate":""},onDoorClick:function(e,t){this.indexDoor=e,t.stopPropagation(),t.preventDefault()},fetch:function(){var e=this;$.a.get(A("schedule")).then((function(t){var n=t.data;return e.schedules=n}))},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),$.a.post(A("group"),this.group).then((function(){return t.$emit("submit")})).catch((function(n){if(!n.response.data)return console.error(n);console.log("response error",n.response.data.errors),t.errorResponses=n.response.data.errors.map((function(e){var t=e.msg;return t})),e.preventDefault()}))},onDelete:function(){var e=this;$.a.delete(A("group/".concat(this.group.id))).then((function(){return e.$emit("submit")})).catch((function(e){console.error(e)}))}},components:{Form:X}},ee=Z,te=Object(a["a"])(ee,G,R,!1,null,null,null),ne=te.exports,re=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"elements"},[n("SearchBar",{attrs:{elements:e.elements},on:{queryResult:e.onQueryResult}}),n("table",[n("thead",[e._t("headers")],2),n("tbody",[e._t("body")],2)]),n("button",{on:{click:function(t){return e.$emit("add")}}},[e._v("Ajouter")]),e.selectedElement?n("Modal",[e._t("form")],2):e._e()],1)},se=[],oe=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("transition",{attrs:{name:"fade"}},[n("div",{staticClass:"modal"},[n("div",{staticClass:"modal-body"},[e._t("default")],2)])])},ae=[],ie={name:"Modal"},le=ie,ue=(n("22d7"),Object(a["a"])(le,oe,ae,!1,null,null,null)),ce=ue.exports,de=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("span",{staticClass:"search-bar"},[n("div",{staticClass:"search-container"},[n("i",{staticClass:"icon-search"}),n("input",{directives:[{name:"model",rawName:"v-model",value:e.query,expression:"query"}],attrs:{type:"search",name:"search",placeholder:"Search..."},domProps:{value:e.query},on:{input:function(t){t.target.composing||(e.query=t.target.value)}}})])])},me=[],fe=(n("4de4"),n("07ac"),n("ac1f"),n("466d"),n("3835")),pe=n("53ca"),he={name:"SearchBar",props:["elements"],data:function(){return{query:"",filteredElements:[]}},methods:{match:function(e,t){var n=this;return Object.values(e).reduce((function(e,r){return"object"===Object(pe["a"])(r)?e+n.match(r,t):"string"===typeof r?e+ +r.includes(t):e}),0)},update:function(e){var t=this;e.length?(this.filteredElements=this.elements.map((function(n){return[n,t.match(n,e)]})).filter((function(e){var t=Object(fe["a"])(e,2),n=t[1];return n})).sort((function(e,t){return t.score-e.score})).map((function(e){var t=Object(fe["a"])(e,1),n=t[0];return n})),console.log("update",this.filteredElements)):this.filteredElements=this.elements}},watch:{query:function(e){this.update(e)},elements:function(){this.update(this.query)},filteredElements:function(e){this.$emit("queryResult",e)}},components:{},mounted:function(){this.update(this.query)}},ve=he,ge=(n("a3d8"),Object(a["a"])(ve,de,me,!1,null,"ab6b27aa",null)),be=ge.exports,ye={name:"ElementsDisplay",props:["elements","selectedElement"],methods:{onAddElement:function(){console.log("todo")},onElementClick:function(e){this.selectedElement=e},onQueryResult:function(e){this.$emit("queryResult",e)},onCancel:function(){this.selectedElement=null},onSubmit:function(){this.selectedElement=null}},components:{Modal:ce,SearchBar:be},mounted:function(){}},_e=ye,De=(n("54bf"),Object(a["a"])(_e,re,se,!1,null,null,null)),Ce=De.exports,Ee={name:"ElementsDisplayMixin",data:function(){return{elements:[],filteredElements:[],groups:[],selectedElement:null}},methods:{onElementClick:function(e){this.selectedElement=e},onQueryResult:function(e){this.filteredElements=e},onAddElement:function(){console.log("TODO")},onCancel:function(){this.selectedElement=null},onSubmit:function(){this.selectedElement=null,this.fetch()},fetch:function(){console.log("TODO")}},mounted:function(){this.fetch()}},ke={name:"Groups",data:function(){return{doors:[]}},mixins:[Ee],methods:{onAddElement:function(){this.selectedElement={name:"",doorAccess:this.doors.reduce((function(e,t){var n=t.id;return e[n]="",e}),{})}},fetch:function(){var e=this;$.a.get(A("door")).then((function(t){var n=t.data;return e.doors=n})),$.a.get(A("group")).then((function(t){var n=t.data;return e.elements=n}))}},components:{Group:ne,ElementsDisplay:Ce}},xe=ke,we=Object(a["a"])(xe,T,N,!1,null,null,null),Ae=we.exports,Se=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"users"},[n("ElementsDisplay",{attrs:{elements:e.elements,selectedElement:e.selectedElement},on:{queryResult:e.onQueryResult,add:e.onAddElement}},[n("tr",{attrs:{slot:"headers"},slot:"headers"},[n("th",[e._v("Nom")]),n("th",[e._v("Prenom")]),n("th",[e._v("Badges")]),n("th",[e._v("Groupes")])]),e._l(e.filteredElements,(function(t,r){return n("tr",{key:r,attrs:{slot:"body"},on:{click:function(n){return e.onElementClick(t)}},slot:"body"},[n("td",[e._v(e._s(t.lastname))]),n("td",[e._v(e._s(t.firstname))]),n("td",[e._v("TODO")]),n("td",[e._v(e._s(e.getGroups(t.groups)))])])})),n("User",{attrs:{slot:"form",element:e.selectedElement},on:{cancel:function(t){return e.onCancel()},submit:function(t){return e.onSubmit()}},slot:"form"})],2)],1)},$e=[],Oe=(n("a15b"),n("b0c0"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{attrs:{element:e.element,onSubmit:e.onSubmit,onDelete:e.onDelete,onCancel:e.onCancel}},[n("div",{attrs:{slot:"body"},slot:"body"},[n("label",[e._v(" nom de famille "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.lastname,expression:"user.lastname"}],class:e.getClass("lastname"),attrs:{type:"text",id:"lastname",name:"lastname",required:""},domProps:{value:e.user.lastname},on:{input:function(t){t.target.composing||e.$set(e.user,"lastname",t.target.value)}}})]),n("label",[e._v(" Prenom "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.firstname,expression:"user.firstname"}],class:e.getClass("firstname"),attrs:{type:"text",id:"firstname",name:"firstname",required:""},domProps:{value:e.user.firstname},on:{input:function(t){t.target.composing||e.$set(e.user,"firstname",t.target.value)}}})]),n("label",[e._v(" admin "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.isAdmin,expression:"user.isAdmin"}],class:e.getClass("isAdmin"),attrs:{type:"checkbox",id:"isAdmin",name:"isAdmin",required:""},domProps:{checked:Array.isArray(e.user.isAdmin)?e._i(e.user.isAdmin,null)>-1:e.user.isAdmin},on:{change:function(t){var n=e.user.isAdmin,r=t.target,s=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&e.$set(e.user,"isAdmin",n.concat([o])):a>-1&&e.$set(e.user,"isAdmin",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.user,"isAdmin",s)}}})]),n("div",{class:e.user.isAdmin?"":"hidden"},[n("label",[e._v(" email "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.email,expression:"user.email"}],class:e.getClass("email"),attrs:{type:"text",id:"email",name:"email",required:""},domProps:{value:e.user.email},on:{input:function(t){t.target.composing||e.$set(e.user,"email",t.target.value)}}})]),n("label",[e._v(" password "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.user.password,expression:"user.password"}],class:e.getClass("password"),attrs:{type:"password",id:"password",name:"password",required:""},domProps:{value:e.user.password},on:{input:function(t){t.target.composing||e.$set(e.user,"password",t.target.value)}}})])]),n("label",{staticClass:"long-input"},[e._v(" Groupes "),n("VoerroTagsInput",{attrs:{"existing-tags":e.groupTags,typeahead:!0},model:{value:e.selectedGroups,callback:function(t){e.selectedGroups=t},expression:"selectedGroups"}})],1),n("label",{staticClass:"long-input"},[e._v(" Badges "),n("button",{staticClass:"validate small-button"},[e._v("+")]),e._l(e.user.badges,(function(t,r){return n("button",{key:r,staticClass:"delete small-button"},[e._v(e._s(t))])}))],2)])])}),Pe=[],je=n("5530"),qe=n("0b72"),Ue={name:"User",data:function(){return{groups:[],groupTags:[],selectedGroups:[]}},mixins:[Y],computed:{user:{get:function(){return this.element},set:function(e){this.element=e}}},methods:{updateSelectedGroups:function(){this.user&&(this.selectedGroups=this.getGroups(this.user.groups),this.groupTags=this.groups.map((function(e){return{value:e.name}})))},fetch:function(){var e=this;return $.a.get(A("group")).then((function(t){var n=t.data;e.groupTags=n.map((function(e){var t=e.name;return{value:t}})),e.groups=n})).then((function(){return e.updateSelectedGroups()}))},getGroups:function(e){var t=this;return e.map((function(e){return{value:t.groups.find((function(t){return t.id===e})).name}}))},onSubmit:function(e){var t=this;e.preventDefault(),e.stopPropagation(),this.user.groups=this.selectedGroups.map((function(e){var n=e.value;return t.groups.find((function(e){return e.name===n})).id})),$.a.get(A("encrypt")).then((function(e){var n=e.data,r=n;return t.user.admin&&t.user.password.length?P.a.encrypt(t.user.password,r):""})).then((function(e){return $.a.post(A("user"),Object(je["a"])(Object(je["a"])({},t.user),{},{password:e}))})).then((function(){t.$emit("submit")})).catch((function(e){if(!e.response.data)return console.error(e);console.log("response error",e.response.data.errors),t.invalidFields=e.response.data.errors.map((function(e){var t=e.param;return t}))}))},onDelete:function(){var e=this;$.a.delete(A("user/".concat(this.user.id))).then((function(){return e.$emit("submit")})).catch((function(e){console.error(e)}))}},components:{VoerroTagsInput:qe["a"],Form:X}},Fe=Ue,Te=Object(a["a"])(Fe,Oe,Pe,!1,null,null,null),Ne=Te.exports,Ge={name:"Users",data:function(){return{groups:[]}},mixins:[Ee],methods:{onAddElement:function(){this.selectedElement={firstname:"",lastname:"",email:"",password:"",isAdmin:!1,groups:[],badges:[]}},getGroups:function(e){var t=this;return e.map((function(e){var n=t.groups.find((function(t){return t.id===e}));return n?n.name:null})).filter((function(e){return e})).join(" ")},fetch:function(){var e=this;$.a.get(A("user")).then((function(t){var n=t.data;e.elements=n})),$.a.get(A("group")).then((function(t){var n=t.data;return e.groups=n}))}},components:{User:Ne,ElementsDisplay:Ce}},Re=Ge,Be=Object(a["a"])(Re,Se,$e,!1,null,null,null),He=Be.exports,Me=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("ElementsDisplay",{staticClass:"schedules",attrs:{elements:e.elements,selectedElement:e.selectedElement},on:{queryResult:e.onQueryResult,add:e.onAddElement}},[n("tr",{attrs:{slot:"headers"},slot:"headers"},[n("th",[e._v("Nom")])]),e._l(e.filteredElements,(function(t,r){return n("tr",{key:r,attrs:{slot:"body"},on:{click:function(n){return e.onElementClick(t)}},slot:"body"},[n("td",[e._v(e._s(t.name))])])})),n("Schedule",{attrs:{slot:"form",element:e.selectedElement},on:{cancel:function(t){return e.onCancel()},submit:function(t){return e.onSubmit()}},slot:"form"})],2)},Ve=[],Qe=(n("cb29"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{attrs:{element:e.element,onSubmit:e.onSubmit,onDelete:e.onDelete,onCancel:e.onCancel}},[n("div",{staticClass:"body large-body",attrs:{slot:"body"},slot:"body"},[n("label",[e._v(" nom "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.schedule.name,expression:"schedule.name"}],class:e.getClass("name"),attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:e.schedule.name},on:{input:function(t){t.target.composing||e.$set(e.schedule,"name",t.target.value)}}})]),n("div",{staticClass:"large-form-container"},[n("span",{staticClass:"date-container"},e._l(e.days,(function(t,r){return n("button",{key:r,class:e.getDayButtonClass(r),on:{click:function(t){return e.onDayClick(r,t)}}},[e._v(e._s(t))])})),0)]),n("div",[n("label",[n("input",{directives:[{name:"model",rawName:"v-model",value:e.currentDay.allDay,expression:"currentDay.allDay"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(e.currentDay.allDay)?e._i(e.currentDay.allDay,null)>-1:e.currentDay.allDay},on:{change:function(t){var n=e.currentDay.allDay,r=t.target,s=!!r.checked;if(Array.isArray(n)){var o=null,a=e._i(n,o);r.checked?a<0&&e.$set(e.currentDay,"allDay",n.concat([o])):a>-1&&e.$set(e.currentDay,"allDay",n.slice(0,a).concat(n.slice(a+1)))}else e.$set(e.currentDay,"allDay",s)}}}),e._v(" Toute la journee ")]),e._l(e.currentDay.intervals,(function(t,r){return n("span",{key:r,staticClass:"date-container",class:e.getDateContainerClass(e.indexDay)},[n("p",[e._v("de")]),n("TimePicker",{attrs:{"close-on-complete":"","minute-interval":5},on:{change:function(t){return e.onDatePicked(r)}},model:{value:t["start"],callback:function(n){e.$set(t,"start",n)},expression:"interval['start']"}}),n("p",[e._v("a")]),n("TimePicker",{attrs:{"close-on-complete":"","minute-interval":5},on:{change:function(t){return e.onDatePicked(r)}},model:{value:t["end"],callback:function(n){e.$set(t,"end",n)},expression:"interval['end']"}})],1)}))],2)])])}),Ie=[],Je=n("97fc"),Le=n.n(Je),ze=(n("1e11"),{name:"Schedule",props:["element"],mixins:[Y],data:function(){return{indexDay:0,testBool:!1,days:["lundi","mardi","mercredi","jeudi","vendredi","samedi","dimanche"]}},computed:{currentDay:function(){return this.schedule.days[this.indexDay]},schedule:{get:function(){return this.element},set:function(e){this.element=e}}},methods:{getDayButtonClass:function(e){return e===this.indexDay?"validate":""},getDateContainerClass:function(e){return this.schedule.days[e].allDay?"hidden":""},onDatePicked:function(e){var t=this.currentDay.intervals,n=t[t.length-1],r=n.start,s=n.end;r&&s&&t.length===e+1&&r.HH&&r.mm&&s.HH&&s.mm&&t.push({start:{HH:"",mm:""},end:{HH:"",mm:""}})},onDayClick:function(e,t){this.indexDay=e,this.currentDay.intervals.length||(this.currentDay.intervals=this.currentDay.intervals.concat({start:{HH:"",mm:""},end:{HH:"",mm:""}})),t.stopPropagation(),t.preventDefault()},onSubmit:function(e){var t=this;console.log("testBool",this.testBool),$.a.post(A("schedule"),JSON.parse(JSON.stringify(this.schedule))).then((function(){return t.$emit("submit")})).catch((function(n){if(!n.response.data)return console.error(n);console.log("response error",n.response.data.errors),t.invalidFields=n.response.data.errors.map((function(e){var t=e.param;return t})),e.preventDefault()})),console.log(e),e.preventDefault(),e.stopPropagation()},onDelete:function(){var e=this;$.a.delete(A("schedule/".concat(this.schedule.id))).then((function(){return e.$emit("submit")})).catch((function(e){console.error(e)}))}},components:{TimePicker:Le.a,Form:X}}),Ke=ze,We=(n("4297"),Object(a["a"])(Ke,Qe,Ie,!1,null,null,null)),Xe=We.exports,Ye={name:"Schedules",mixins:[Ee],methods:{onAddElement:function(){this.selectedElement={name:"",days:new Array(7).fill(0).map((function(){return{allDay:!1,intervals:[{start:null,end:null}]}}))}},fetch:function(){var e=this;$.a.get(A("schedule")).then((function(t){var n=t.data;return e.elements=n}))}},components:{Schedule:Xe,ElementsDisplay:Ce}},Ze=Ye,et=Object(a["a"])(Ze,Me,Ve,!1,null,null,null),tt=et.exports,nt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"doors"},[n("ElementsDisplay",{attrs:{elements:e.elements,selectedElement:e.selectedElement},on:{queryResult:e.onQueryResult,add:e.onAddElement}},[n("tr",{attrs:{slot:"headers"},slot:"headers"},[n("th",[e._v("Nom")])]),e._l(e.filteredElements,(function(t,r){return n("tr",{key:r,attrs:{slot:"body"},on:{click:function(n){return e.onElementClick(t)}},slot:"body"},[n("td",[e._v(e._s(t.name))])])})),n("Door",{attrs:{slot:"form",element:e.selectedElement},on:{cancel:function(t){return e.onCancel()},submit:function(t){return e.onSubmit()}},slot:"form"})],2)],1)},rt=[],st=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{attrs:{element:e.element,onSubmit:e.onSubmit,onDelete:e.onDelete,onCancel:e.onCancel}},[n("div",{staticClass:"body",attrs:{slot:"body"},slot:"body"},[n("label",[e._v(" nom "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.door.name,expression:"door.name"}],class:e.getClass("name"),attrs:{type:"text",id:"name",name:"name",required:""},domProps:{value:e.door.name},on:{input:function(t){t.target.composing||e.$set(e.door,"name",t.target.value)}}})])])])},ot=[],at={name:"Door",mixins:[Y],computed:{door:{get:function(){return this.element},set:function(e){this.element=e}}},methods:{onSubmit:function(e){var t=this;$.a.post(A("door"),this.door).then((function(e){var t=e.data;return console.log("validated",t)})).catch((function(n){if(!n.response.data)return console.error(n);console.log("response error",n.response.data.errors),t.invalidFields=n.response.data.errors.map((function(e){var t=e.param;return t})),e.preventDefault()}))},onDelete:function(){var e=this;console.log("ICI delete",A("door/".concat(this.door.id))),$.a.delete(A("door/".concat(this.door.id))).then((function(){return e.$emit("submit")})).catch((function(e){console.error(e)}))}},components:{Form:X}},it=at,lt=Object(a["a"])(it,st,ot,!1,null,null,null),ut=lt.exports,ct={name:"Doors",mixins:[Ee],methods:{onAddElement:function(){this.selectedElement={name:""}},fetch:function(){var e=this;$.a.get(A("door")).then((function(t){var n=t.data;e.elements=n}))}},components:{Door:ut,ElementsDisplay:Ce}},dt=ct,mt=Object(a["a"])(dt,nt,rt,!1,null,null,null),ft=mt.exports,pt=function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",{staticClass:"badges"},[n("ElementsDisplay",{attrs:{elements:e.elements,selectedElement:e.selectedElement},on:{queryResult:e.onQueryResult,add:e.onAddElement}},[n("tr",{attrs:{slot:"headers"},slot:"headers"},[n("th",[e._v("uuid")])]),e._l(e.filteredElements,(function(t,r){return n("tr",{key:r,attrs:{slot:"body"},on:{click:function(n){return e.onElementClick(t)}},slot:"body"},[n("td",[e._v(e._s(t))])])})),n("Badge",{attrs:{slot:"form",element:e.selectedElement,users:e.users},on:{cancel:function(t){return e.onCancel()}},slot:"form"})],2)],1)},ht=[],vt=(n("b64b"),function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("Form",{attrs:{element:e.element,onSubmit:e.onSubmit,onDelete:e.onDelete,onCancel:e.onCancel}},[n("div",{staticClass:"body",attrs:{slot:"body"},slot:"body"},[n("label",[e._v(" uuid "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.badge,expression:"badge"}],class:e.getClass("name"),attrs:{type:"text",id:"uuid",uuid:"uuid",required:""},domProps:{value:e.badge},on:{input:function(t){t.target.composing||(e.badge=t.target.value)}}})]),n("div",[n("label",[e._v(" Utilisateur "),n("input",{directives:[{name:"model",rawName:"v-model",value:e.search,expression:"search"}],attrs:{type:"text",placeholder:"Utilisateur..."},domProps:{value:e.search},on:{input:function(t){t.target.composing||(e.search=t.target.value)}}})]),e.selectedUser?e._e():n("div",{staticClass:"name-list",class:e.getUsersClass()},e._l(e.filteredUsers,(function(t,r){return n("div",{key:r,on:{click:function(n){return e.onUserClick(t)}}},[e._v(e._s(t.firstname)+" "+e._s(t.lastname))])})),0),e.selectedUser?n("div",[n("button",{on:{click:function(t){return e.onSelectedUserClick()}}},[e._v(e._s(e.selectedUser.firstname)+" "+e._s(e.selectedUser.lastname))])]):e._e()])])])}),gt=[],bt=(n("841c"),{name:"Badge",props:["users"],mixins:[Y],data:function(){return{search:"",selectedUser:null}},computed:{filteredUsers:function(){var e=this,t=this.users.filter((function(t){var n=t.lastname,r=t.firstname,s=t.email;return n.includes(e.search)||r.includes(e.search)||s.includes(e.search)}));return new Array(20).fill(0).map((function(){return t[0]}))},badge:{get:function(){return this.element},set:function(e){this.element=e}}},methods:{getUsersClass:function(){return this.selectedUser?"hidden":""},getSelectedUserClass:function(){return this.selectedUser?"":"hidden"},onUserClick:function(e){this.selectedUser=e},onSelectedUserClick:function(){this.selectedUser=null},onSubmit:function(e){var t=this;this.selectedUser&&(this.selectedUser.badges.push(this.badge.uuid),$.a.post(A("user"),this.selectedUser).then((function(){return t.$emit("submit")})).catch((function(n){if(!n.response.data)return console.error(n);console.log("response error",n.response.data.errors),t.invalidFields=n.response.data.errors.map((function(e){var t=e.param;return t})),e.preventDefault()})))},onDelete:function(){var e=this;$.a.delete(A("badge/".concat(this.badge.id))).then((function(){return e.$emit("submit")})).catch((function(e){console.error(e)}))}},components:{Form:X}}),yt=bt,_t=(n("a0d3"),Object(a["a"])(yt,vt,gt,!1,null,null,null)),Dt=_t.exports,Ct={name:"Badges",data:function(){return{users:[]}},mixins:[Ee],methods:{onAddElement:function(){this.selectedElement={uuid:""}},fetch:function(){var e=this;$.a.get(A("user")).then((function(t){var n=t.data;e.users=n,e.elements=Object.keys(n.reduce((function(e,t){var n=t.badges;return n.forEach((function(t){return e[t]=1})),e}),{}))}))}},components:{Badge:Dt,ElementsDisplay:Ce}},Et=Ct,kt=Object(a["a"])(Et,pt,ht,!1,null,null,null),xt=kt.exports;r["default"].use(c["a"]);var wt=[{path:"/",name:"Home",component:k},{path:"/user",name:"Users",component:He,meta:{requiresAuth:!0}},{path:"/login",name:"Login",component:F},{path:"/group",name:"Group",component:Ae,meta:{requiresAuth:!0}},{path:"/door",name:"Door",component:ft,meta:{requiresAuth:!0}},{path:"/badge",name:"Badge",component:xt,meta:{requiresAuth:!0}},{path:"/schedule",name:"Schedule",component:tt,meta:{requiresAuth:!0}},{path:"/about",name:"About",component:function(){return n.e("about").then(n.bind(null,"f820"))}}],At=new c["a"]({mode:"history",base:"/",routes:wt});At.beforeEach((function(e,t,n){e.matched.some((function(e){return e.meta.requiresAuth}))&&null==localStorage.getItem("token")?n({path:"/login"}):n()}));var St=At,$t=n("2f62");r["default"].use($t["a"]);var Ot=new $t["a"].Store({state:{},mutations:{},actions:{},modules:{}}),Pt=n("2b27"),jt=n.n(Pt);r["default"].config.productionTip=!1,r["default"].use(jt.a),$.a.interceptors.request.use((function(e){var t=localStorage.getItem("token");return e.headers.authorization=t,e})),new r["default"]({router:St,store:Ot,render:function(e){return e(u)}}).$mount("#app")},6:function(e,t){},7:function(e,t){},8:function(e,t){},"82bc":function(e,t,n){"use strict";var r=n("eaa6"),s=n.n(r);s.a},"85ec":function(e,t,n){},9:function(e,t){},"9b13":function(e,t,n){},a0d3:function(e,t,n){"use strict";var r=n("128a"),s=n.n(r);s.a},a3d8:function(e,t,n){"use strict";var r=n("9b13"),s=n.n(r);s.a},be87:function(e,t,n){},e70b:function(e,t,n){},eaa6:function(e,t,n){}});
//# sourceMappingURL=app.53c56fde.js.map